(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,l)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(8357)}])},7328:(e,t,l)=>{e.exports=l(9836)},8357:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>d});var a=l(7876),n=l(4232),s=l(7328),o=l.n(s);let i=(0,n.forwardRef)((e,t)=>{let{brushSize:l,currentColor:s,zoom:o,setZoom:i,fillMode:r}=e,c=(0,n.useRef)(null),d=(0,n.useRef)(null),u=(0,n.useRef)(null),[m,h]=(0,n.useState)(!1),[x,f]=(0,n.useState)(null),[p,b]=(0,n.useState)([]),[g,v]=(0,n.useState)(-1),[j,y]=(0,n.useState)({x:0,y:0}),[N,w]=(0,n.useState)(!1),[C,D]=(0,n.useState)({x:0,y:0}),[F,S]=(0,n.useState)({x:0,y:0}),[M,k]=(0,n.useState)(800),[I,T]=(0,n.useState)(600),[E,R]=(0,n.useState)(800),[z,A]=(0,n.useState)(600);(0,n.useEffect)(()=>{let e=()=>{let e,t,l=d.current;if(!l)return;let a=l.clientWidth,n=l.clientHeight,s=4/3;a/n>4/3?e=(t=Math.min(.85*n,600))*s:t=(e=Math.min(.85*a,800))/s,e=Math.max(e,300),t=Math.max(t,225),R(e),A(t),k(800),T(600)};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),(0,n.useEffect)(()=>{let e=c.current;if(!e)return;let t=e.getContext("2d");f(t),e.width=M,e.height=I,t.fillStyle="white",t.fillRect(0,0,M,I),_(t),X(t)},[o]);let _=e=>{let t=new Image;t.onload=()=>{e.fillStyle="white",e.fillRect(0,0,M,I);let l=Math.min(M/t.width,I/t.height),a=(M-t.width*l)/2,n=(I-t.height*l)/2;e.drawImage(t,a,n,t.width*l,t.height*l),X(e)},t.onerror=()=>{e.strokeStyle="#000000",e.lineWidth=2,e.beginPath(),e.rect(200,150,400,300),e.moveTo(250,200),e.lineTo(550,200),e.moveTo(300,250),e.lineTo(500,250),e.stroke()},t.src="/honor.png"},X=e=>{let t=e.getImageData(0,0,M,I),l=p.slice(0,g+1);l.push(t),b(l),v(l.length-1)},Y=(e,t,l,a)=>{let n=(l*a+t)*4;return{r:e.data[n],g:e.data[n+1],b:e.data[n+2],a:e.data[n+3]}},B=(e,t,l,a,n)=>{let s=(l*a+t)*4;e.data[s]=n.r,e.data[s+1]=n.g,e.data[s+2]=n.b,e.data[s+3]=n.a},L=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.abs(e.r-t.r)<=l&&Math.abs(e.g-t.g)<=l&&Math.abs(e.b-t.b)<=l&&Math.abs(e.a-t.a)<=l},U=e=>{var t,l;let a=c.current;if(void 0!==e.offsetX&&void 0!==e.offsetY)return{x:e.offsetX,y:e.offsetY};let n=a.getBoundingClientRect(),s=(null==(t=e.touches)?void 0:t[0])||(null==(l=e.changedTouches)?void 0:l[0])||e;return{x:(s.clientX-n.left)*(a.width/a.clientWidth),y:(s.clientY-n.top)*(a.height/a.clientHeight)}},Z=e=>e.touches&&e.touches.length>0?{clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e.changedTouches&&e.changedTouches.length>0?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY},P=e=>{let t=u.current;if(!t)return;let{clientX:a,clientY:n}=Z(e),s=l*o;if(N){let e=F.x+j.x,l=F.y+j.y;t.style.left="".concat(e-s/2,"px"),t.style.top="".concat(l-s/2,"px")}else t.style.left="".concat(a-s/2,"px"),t.style.top="".concat(n-s/2,"px"),S({x:a-j.x,y:n-j.y});t.style.width="".concat(s,"px"),t.style.height="".concat(s,"px"),t.style.display="block"},W=e=>{e.preventDefault();let{clientX:t,clientY:a}=Z(e);if(e.touches&&e.touches.length>1||1===e.button||2===e.button){w(!0),D({x:t,y:a}),S({x:t-j.x,y:a-j.y});return}let n=U(e);r&&x?((e,t,l,a)=>{let n=e.getImageData(0,0,M,I),s=Y(n,t,l,M),o=(e=>{let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16),a:255}:null})(a);if(L(s,o))return;let i=[{x:t,y:l}],r=new Set;for(;i.length>0;){let{x:e,y:t}=i.pop();if(e<0||e>=M||t<0||t>=I)continue;let l="".concat(e,",").concat(t);!r.has(l)&&L(Y(n,e,t,M),s,15)&&(r.add(l),B(n,e,t,M,o),i.push({x:e+1,y:t}),i.push({x:e-1,y:t}),i.push({x:e,y:t+1}),i.push({x:e,y:t-1}))}e.putImageData(n,0,0),requestAnimationFrame(()=>{X(e)})})(x,Math.floor(n.x),Math.floor(n.y),s):(h(!0),x&&(x.beginPath(),x.moveTo(n.x,n.y),x.lineCap="round",x.lineJoin="round",x.strokeStyle=s,x.lineWidth=l))},H=e=>{e.preventDefault();let{clientX:t,clientY:l}=Z(e);if(N){let a=t-C.x,n=l-C.y;y(e=>({x:e.x+a,y:e.y+n})),D({x:t,y:l}),e.touches||P(e);return}if(e.touches||P(e),!m||!x||r)return;let a=U(e);x.lineTo(a.x,a.y),x.stroke()},O=()=>{if(N)return void w(!1);m&&x&&(x.closePath(),X(x)),h(!1)};(0,n.useImperativeHandle)(t,()=>({undo:()=>{if(g>0&&x){let e=g-1;x.putImageData(p[e],0,0),v(e)}},redo:()=>{if(g<p.length-1&&x){let e=g+1;x.putImageData(p[e],0,0),v(e)}},clear:()=>{x&&(x.fillStyle="white",x.fillRect(0,0,M,I),_(x),X(x))},importImage:e=>{if(x){let t=new FileReader;t.onload=e=>{let t=new Image;t.onload=()=>{x.fillStyle="white",x.fillRect(0,0,M,I);let e=Math.min(M/t.width,I/t.height),l=(M-t.width*e)/2,a=(I-t.height*e)/2;x.drawImage(t,l,a,t.width*e,t.height*e),X(x)},t.src=e.target.result},t.readAsDataURL(e)}},exportImage:()=>{let e=c.current;if(e){let t=document.createElement("a");t.download="coloring-art.png",t.href=e.toDataURL(),t.click()}}}));let q={width:"".concat(E*o,"px"),height:"".concat(z*o,"px"),transform:"translate(".concat(j.x,"px, ").concat(j.y,"px)")};return(0,a.jsxs)("div",{ref:d,className:"canvas-container",onContextMenu:e=>e.preventDefault(),children:[(0,a.jsx)("canvas",{ref:c,className:"drawing-canvas",style:q,onMouseDown:W,onMouseMove:H,onMouseUp:O,onMouseLeave:()=>{let e=u.current;e&&(e.style.display="none"),O()},onTouchStart:W,onTouchMove:H,onTouchEnd:O,onTouchCancel:()=>{O()},onWheel:e=>{e.preventDefault();let t=e.deltaY;i(t>0?Math.max(.25,o-.1):Math.min(3,o+.1))}}),(0,a.jsx)("div",{ref:u,className:"custom-cursor"})]})});i.displayName="ColoringCanvas";let r=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#FFC0CB","#A52A2A","#808080","#008000","#000080","#800000"];function c(e){let{brushSize:t,setBrushSize:l,currentColor:s,setCurrentColor:o,zoom:i,setZoom:c,canvasRef:d,fillMode:u,setFillMode:m}=e,[h,x]=(0,n.useState)([]),[f,p]=(0,n.useState)(-1),b=()=>{d.current&&d.current.undo&&d.current.undo()},g=()=>{d.current&&d.current.redo&&d.current.redo()},v=()=>{d.current&&d.current.clear&&d.current.clear()},j=e=>{let t=e.target.files[0];t&&d.current&&d.current.importImage&&d.current.importImage(t)},y=()=>{d.current&&d.current.exportImage&&d.current.exportImage()};return(0,a.jsx)("div",{className:"toolbar",children:(0,a.jsxs)("div",{className:"container-fluid",children:[(0,a.jsx)("div",{className:"d-none d-lg-block",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label fw-bold",children:"Tools"}),(0,a.jsxs)("div",{className:"d-flex gap-2 mb-3",children:[(0,a.jsx)("button",{className:"btn ".concat(u?"btn-outline-primary":"btn-primary"," flex-fill"),onClick:()=>m(!1),title:"Brush Tool",children:"\uD83D\uDD8C️ Brush"}),(0,a.jsx)("button",{className:"btn ".concat(u?"btn-primary":"btn-outline-primary"," flex-fill"),onClick:()=>m(!0),title:"Fill Tool",children:"\uD83E\uDEA3 Fill"})]})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label fw-bold mb-2",children:"Colors"}),(0,a.jsxs)("div",{className:"color-palette mb-3",children:[r.map(e=>(0,a.jsx)("div",{className:"color-option ".concat(s===e?"active":""),style:{backgroundColor:e},onClick:()=>o(e),title:e},e)),(0,a.jsx)("input",{type:"color",value:s,onChange:e=>o(e.target.value),className:"form-control form-control-color",style:{width:"30px",height:"30px",padding:"1px"},title:"Custom color"})]})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("label",{className:"form-label fw-bold",children:["Brush Size: ",t,"px"]}),(0,a.jsx)("input",{type:"range",className:"form-range mb-3",min:"1",max:"50",value:t,onChange:e=>l(parseInt(e.target.value))})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("label",{className:"form-label fw-bold",children:["Zoom: ",Math.round(100*i),"%"]}),(0,a.jsx)("input",{type:"range",className:"form-range mb-3",min:"0.25",max:"5",step:"0.25",value:i,onChange:e=>c(parseFloat(e.target.value))})]}),(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsx)("label",{className:"form-label fw-bold mb-2",children:"Actions"}),(0,a.jsxs)("div",{className:"d-grid gap-2",children:[(0,a.jsxs)("div",{className:"row g-2",children:[(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:b,title:"Undo",children:"↶ Undo"})}),(0,a.jsx)("div",{className:"col-6",children:(0,a.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:g,title:"Redo",children:"↷ Redo"})})]}),(0,a.jsx)("button",{className:"btn btn-outline-danger",onClick:v,title:"Clear canvas",children:"\uD83D\uDDD1️ Clear Canvas"}),(0,a.jsxs)("label",{className:"btn btn-outline-primary",style:{cursor:"pointer"},children:["\uD83D\uDCC1 Import Image",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:j,style:{display:"none"}})]}),(0,a.jsx)("button",{className:"btn btn-outline-success",onClick:y,title:"Export image",children:"\uD83D\uDCBE Export Image"})]})]})]})}),(0,a.jsx)("div",{className:"d-lg-none",children:(0,a.jsxs)("div",{className:"row g-3 align-items-center",children:[(0,a.jsxs)("div",{className:"col-12 col-md-6 col-lg-4",children:[(0,a.jsx)("label",{className:"form-label fw-bold mb-2",children:"Colors"}),(0,a.jsxs)("div",{className:"color-palette",children:[r.map(e=>(0,a.jsx)("div",{className:"color-option ".concat(s===e?"active":""),style:{backgroundColor:e},onClick:()=>o(e),title:e},e)),(0,a.jsx)("input",{type:"color",value:s,onChange:e=>o(e.target.value),className:"form-control form-control-color",style:{width:"30px",height:"30px",padding:"1px"},title:"Custom color"})]})]}),(0,a.jsx)("div",{className:"col-12 col-md-2 col-lg-2",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)("label",{className:"form-label fw-bold mb-0 text-nowrap",children:"Tool:"}),(0,a.jsxs)("div",{className:"d-flex gap-2 flex-fill",children:[(0,a.jsx)("button",{className:"btn btn-sm ".concat(u?"btn-outline-primary":"btn-primary"," flex-fill"),onClick:()=>m(!1),title:"Brush Tool",children:"\uD83D\uDD8C️"}),(0,a.jsx)("button",{className:"btn btn-sm ".concat(u?"btn-primary":"btn-outline-primary"," flex-fill"),onClick:()=>m(!0),title:"Fill Tool",children:"\uD83E\uDEA3"})]})]})}),(0,a.jsx)("div",{className:"col-12 col-md-3 col-lg-2",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsxs)("label",{className:"form-label fw-bold mb-0 text-nowrap",children:["Size: ",t,"px"]}),(0,a.jsx)("input",{type:"range",className:"form-range flex-fill",min:"1",max:"50",value:t,onChange:e=>l(parseInt(e.target.value))})]})}),(0,a.jsx)("div",{className:"col-12 col-md-3 col-lg-2",children:(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsxs)("label",{className:"form-label fw-bold mb-0 text-nowrap",children:["Zoom: ",Math.round(100*i),"%"]}),(0,a.jsx)("input",{type:"range",className:"form-range flex-fill",min:"0.25",max:"5",step:"0.25",value:i,onChange:e=>c(parseFloat(e.target.value))})]})}),(0,a.jsx)("div",{className:"col-12 col-lg-4",children:(0,a.jsxs)("div",{className:"d-flex w-100",children:[(0,a.jsx)("button",{className:"btn btn-outline-secondary btn-sm flex-fill mx-1",onClick:b,title:"Undo",children:"Undo"}),(0,a.jsx)("button",{className:"btn btn-outline-secondary btn-sm flex-fill mx-1",onClick:g,title:"Redo",children:"Redo"}),(0,a.jsx)("button",{className:"btn btn-outline-danger btn-sm flex-fill mx-1",onClick:v,title:"Clear canvas",children:"Clear"}),(0,a.jsxs)("label",{className:"btn btn-outline-primary btn-sm flex-fill mx-1 d-flex align-items-center justify-content-center",style:{cursor:"pointer"},children:["Import",(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:j,style:{display:"none"}})]}),(0,a.jsx)("button",{className:"btn btn-outline-success btn-sm flex-fill mx-1",onClick:y,title:"Export image",children:"Export"})]})})]})})]})})}function d(){let[e,t]=(0,n.useState)(10),[l,s]=(0,n.useState)("#000000"),[r,d]=(0,n.useState)(1),[u,m]=(0,n.useState)(!1),h=(0,n.useRef)(null);return(0,a.jsxs)("div",{className:"vh-100 d-flex flex-column",children:[(0,a.jsxs)(o(),{children:[(0,a.jsx)("title",{children:"Coloring App - Interactive Drawing"}),(0,a.jsx)("meta",{name:"description",content:"A responsive coloring app built with Next.js"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-capable",content:"yes"}),(0,a.jsx)("meta",{name:"apple-mobile-web-app-status-bar-style",content:"black-translucent"}),(0,a.jsx)("meta",{name:"mobile-web-app-capable",content:"yes"}),(0,a.jsx)("meta",{name:"theme-color",content:"#f8f9fa"}),(0,a.jsx)("meta",{name:"apple-touch-fullscreen",content:"yes"}),(0,a.jsx)("meta",{name:"format-detection",content:"telephone=no"})]}),(0,a.jsxs)("div",{className:"d-none d-lg-flex flex-row h-100",children:[(0,a.jsx)("div",{className:"w-50 d-flex",children:(0,a.jsx)(i,{ref:h,brushSize:e,currentColor:l,zoom:r,setZoom:d,fillMode:u})}),(0,a.jsxs)("div",{className:"w-50 d-flex flex-column",children:[(0,a.jsxs)("div",{className:"bg-primary text-white p-3",children:[(0,a.jsx)("h2",{className:"h4 mb-0",children:"\uD83C\uDFA8 Coloring Studio"}),(0,a.jsx)("small",{className:"opacity-75",children:"Digital Art & Coloring"})]}),(0,a.jsx)("div",{className:"flex-grow-1 overflow-auto",children:(0,a.jsx)(c,{brushSize:e,setBrushSize:t,currentColor:l,setCurrentColor:s,zoom:r,setZoom:d,canvasRef:h,fillMode:u,setFillMode:m})})]})]}),(0,a.jsxs)("div",{className:"d-lg-none d-flex flex-column h-100",children:[(0,a.jsx)(c,{brushSize:e,setBrushSize:t,currentColor:l,setCurrentColor:s,zoom:r,setZoom:d,canvasRef:h,fillMode:u,setFillMode:m}),(0,a.jsx)(i,{ref:h,brushSize:e,currentColor:l,zoom:r,setZoom:d,fillMode:u})]})]})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);